<!DOCTYPE html>
<html>
<head>
  <title>Your Profile</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="css/w3.css"> this was replaced by songspg  -->
  <script src="song_page.js"></script>
  <script src="profile.js"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" type="text/css" href="song_page.css"/>
  <link rel="stylesheet" href="css/extras.css">
  <link rel="stylesheet" href="css/songspg.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
  table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
  }

  td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
  }

  tr:nth-child(even) {
    background-color: #dddddd;
  }
  </style>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <!-- Numeric JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
</head>
<body>
  <div class="title"> <!--onclick="this.classList.toggle('explode')"-->
    My Profile
  </div>
  <div class="topnav">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a class="active"href="profile.html">My Profile</a>
      <a href="login.html">Sign Out</a>
  </div>

  <div class="profile">
    <div class="columns">
      <div id="userInfo">
        <!-- <button onclick="askUser()">Who is Signed in?</button> -->
      </div>
      <!-- Trigger/Open The Modal -->
      <button id="myBtn">View Recommender Stats</button>

      <!-- The Modal -->
      <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <div id="pieChart" style="margin: 15% auto;"></div>
        </div>

      </div>
    </div>
    <div class="description">
      Here are the songs currently in your playlist:
    </div>
    <div class="myPlaylist2">
      <table id="songList">
        <tr>
          <th></th>
          <th>Song</th>
          <th>Album</th>
          <th>Artist</th>
        </tr>
        <!--<tr>
        <td width=5%><img class="album_art" src="./cbook.jpg"></img></td>
        <td>Despacito (Featuring Daddy Yankee)</td>
        <td>Single</td>
        <td>Louis Fonsi, Daddy Yankee</td>
        <td>Johnny</td>

      </tr>-->

    </table>
    <div id="pie"></div>
  </div>
</div>

<!-- Container (About Section)

<div class="w3-content w3-container w3-padding-64 w3-row" id="about">
<div id="Song"  class="listTitles">Song</div>
<div id="Artist"  class="listTitles">Artist</div>
<div id="Album"  class="listTitles">Album</div>
<div id="Genre"  class="listTitles">Genre</div>
<div id="Recommender"  class="listTitles">Recommender</div>
<div id="Interact"  class="listTitles">Interact</div>
<div class="w3-row"><div id="" class="listTitles"></div>
<div class="w3-col m6 w3-center w3-padding-large">
<p><b><i class="fa fa-user w3-margin-right"></i>My Name</b></p><br>
<img src="images/p5.jpg" class="w3-round w3-image w3-opacity w3-hover-opacity-off" alt="Photo of Me" width="500" height="333">
</div>



<! Hide this text on small devices
<div class="w3-col m6 w3-hide-small w3-padding-large">
<p></p>
</div>
</div>
</div>
-->

<div class="songList">
  <div id=""> </div>

</div>

</body>
<script>
function askUser() {
  console.log(sessionStorage.getItem('user'));
}
function sayHello() {
  var statement = document.getElementById("userInfo");
  if (sessionStorage.getItem('user')=="brad") {
    statement.innerHTML = "Hello Brad!"
  }
  if (sessionStorage.getItem('user')=="john") {
    statement.innerHTML = "Hello John!"
  }
}

// Modal Image Gallery
function onClick(element) {
  document.getElementById("img01").src = element.src;
  document.getElementById("modal01").style.display = "block";
  var captionText = document.getElementById("caption");
  captionText.innerHTML = element.alt;
}

// Change style of navbar on scroll
window.onscroll = function() {myFunction()};
function myFunction() {
  var navbar = document.getElementById("myNavbar");
  if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
    navbar.className = "w3-bar" + " w3-card" + " w3-animate-top" + " w3-white";
  } else {
    navbar.className = navbar.className.replace(" w3-card w3-animate-top w3-white", "");
  }
}

// Used to toggle the menu on small screens when clicking on the menu button
function toggleFunction() {
  var x = document.getElementById("navDemo");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else {
    x.className = x.className.replace(" w3-show", "");
  }
}

function initializeChart() {
  var pie = JSON.parse(sessionStorage.getItem('pieChart'));
  var pieData = JSON.parse(sessionStorage.getItem('pieData'));
  console.log(JSON.stringify(pieData));
  console.log(JSON.stringify(pie));
  var layout = {title: 'Your Top Recommenders',height: 600,width: 1200,};
  var title = {title: "Your Top Recommenders"};
  Plotly.newPlot('pieChart', pie, layout, title);
}

function populateChart() {
  var d = [{
    values: [19, 26, 55],
    labels: ['Residential', 'Non-Residential', 'Utility'],
    type: 'pie'
    //title; "Your Top Recommenders"
  }];

  var layout = {title: 'Your Top Recommenders',};
  var title = {title: "Your Top Recommenders"};

  // fill out table

  Plotly.newPlot('pieChart', d, layout, title);
}


// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal
btn.onclick = function() {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}


//populateChart();
initializeChart();
//addToChart('hello');
//addToChart('hello');
//addToChart('goodbye');
sayHello();
buildProfileSongs();
</script>

</html>
